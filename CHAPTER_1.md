# Глава 1: Новата реалност — Счетоводителят като Data Engineer

## 1.1. Краят на „Хартиеното мислене“
Години наред българското счетоводство беше фокусирано върху това „документът да е изряден“. Ако имаш хартия с подпис и печат, всичко е наред. Софтуерът беше просто пишеща машина с калкулатор.

С въвеждането на SAF-T BG v1.0.1, НАП премества фокуса от **документа** към **структурата на данните**. Вече не е достатъчно да имате фактура. Трябва да имате:
- Път на данните (Data lineage) от първичния запис до Главната книга.
- Мапване на всеки ваш вътрешен код към Националната номенклатура.

## 1.2. Защо „Свободният сметкоплан“ е и благословия, и проклятие?
В България всяко предприятие има право на собствен сметкоплан. Можете да използвате сметка 702 за „Приходи от продажби на стоки“, но можете да я наречете и 7021, 7022 или както решите.

**Проблемът:** Сървърите на НАП не знаят какво означава вашата сметка 7021.
**Решението в SAF-T:** Двойната идентификация.
В XML структурата виждаме два ключови тага:
- `<nsSAFT:AccountID>`: Тук стои кодът от номенклатурата на НАП (напр. 301, 411, 702).
- `<nsSAFT:TaxpayerAccountID>`: Тук стои вашият вътрешен код.

Това е „мостът“. Счетоводителят вече не е просто човекът, който „набива фактури“. Той е архитектът, който трябва да построи този мост. Ако мапването е грешно, цялата ви Главна книга (General Ledger) ще бъде отхвърлена като нелогична.

## 1.3. Анатомия на една грешка: Пример от практиката
Представете си „експерт“, който ви съветва как да избегнете глобата, но не ви казва, че в SAF-T номенклатурата за мерни единици (UOMTable) не съществува единица „кашон“. Съществува „BX“ (Box) или „CT“ (Carton).

Ако в склада ви пише „кашон“, а в SAF-T експорта изпратите „кашон“, XML файлът ще се „счупи“ при първата проверка. Адвокатът ще ви защитава в съда след 2 години. Програмистът и счетоводителят трябва да оправят базата данни **днес**.

## 1.4. Процесът на „Почистване“ (Data Cleansing)
Преди изобщо да мислите за експорт на SAF-T, трябва да минете през процеса на изчистване на мастър данните (Master Data):
1. **Контрагенти:** Проверка за валидни ЕИК номера. В SAF-T те се превръщат в уникални идентификатори с префикс „10“ за България.
2. **Номенклатури:** Всички мерни единици, видове плащания и данъчни режими трябва да бъдат заменени със съответните международни кодове (ISO 4217 за валути, UN/ECE за мерни единици).
3. **Сметкоплан:** Всяка сметка трябва да има своя „близнак“ в номенклатурата на НАП.

**Извод:** SAF-T е дигиталната трансформация на счетоводството. Тя изисква технически умения за работа с йерархични структури и релационни бази данни. Всичко останало е шум.
